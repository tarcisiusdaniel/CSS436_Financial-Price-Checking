{% extends "layout.html" %}
{% block content %}
    <form action="/obtain_ticker" method="POST">
                <input type="text" name="tickerval" placeholder="Ticker">
                <input type="submit" id="action" value="Set Ticker">
            </form>

            <!-- Get Price Button -->
            <button id='myButton' type="button">Get Price!</button>
              <script>
                $('#myButton').click(function() {
                    $.ajax({
                        type:'GET',
                        url: "{{ url_for('price')}}",
                        dataType:"text",
                        success: function(response){
                            console.log(response);
                            alert(response);
                        }
                    });
                });
                $(document).ajaxStop(function(){
                    window.location.reload();
                });
            </script>
            <!-- TradingView Widget BEGIN -->
            <div class="tradingview-widget-container">
                <div id="tradingview_8ae14"></div>
                <div class="tradingview-widget-copyright">
                <a href="https://www.tradingview.com/symbols/NASDAQ-MSFT/" rel="noopener" target="_blank">
                <span class="blue-text">MSFR Chart</span>
                </a> by TradingView
            </div>

            <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
            <script type="text/javascript">
            new TradingView.widget(
            {
                "width": 980,
                "height": 610,
                "symbol": "NASDAQ:MSFT",
                "interval": "D",
                "timezone": "Etc/UTC",
                "theme": "Dark",
                "style": "1",
                "locale": "en",
                "toolbar_bg": "#f1f3f6",
                "enable_publishing": false,
                "allow_symbol_change": true,
                "container_id": "tradingview_8ae14"
            }
            );
            setInterval(function(){
                createchart()
                }, 1000);
            </script>
            </div>
            <!-- TradingView Widget END -->
{% endblock content %}